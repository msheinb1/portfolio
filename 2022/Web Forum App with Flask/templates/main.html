{% extends 'base.html' %}

<title>Home</title>

{% block content %}
    <div class = "content">
        {%if name %}
            Welcome {{ name }} to the main page!<br>
            <a href ="/create"><button>Create Post</button></a>
            <a href = "/logout"><button>Logout</button></a>
        {% else %}
            You are not logged in!<br>
            <a href = "/login"><button>Login</button></a>
        {% endif %}
        <hr>
        <h1>{% block title %} Messages {% endblock %}</h1>
        {% if posts %}
            {% for post in posts %}
                <div class='post'>
                    <p>{{ post['created'] }}<br>
                    Author: {{ post['author'] }}</p>
                    <h2>{{ post['title'] }}</h2>
                    <p>{{ post['content'] }}</p>
                </div>
                {%if name == post['author'] %}
                <a href="{{ url_for('edit', id=post['id']) }}"><button>Edit</button></a>

                <form action="{{ url_for('delete', id=post['id']) }}" method="POST">
                    <input type="submit" value="Delete Post"
                            onclick="return confirm('Are you sure you want to delete this post?')">
                </form>        
                <hr>
                {% endif %}
            {% endfor %}
        {% else  %}
            No posts found.
        {% endif %}
    </div>
{% endblock %}